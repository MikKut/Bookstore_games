<div class="add-book-container">
  <h2>Add New Book</h2>

  <form [formGroup]="addBookForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="title">Title</label>
      <input
        id="title"
        type="text"
        class="form-control"
        formControlName="title"
        appFormValidation
      />
      <div *ngIf="addBookForm.get('title')?.invalid && (addBookForm.get('title')?.dirty || addBookForm.get('title')?.touched)" class="invalid-feedback">
        Title is required and must be less than 100 characters.
      </div>
    </div>

    <div class="form-group">
      <label for="publicationYear">Publication Year</label>
      <input
        id="publicationYear"
        type="number"
        class="form-control"
        formControlName="publicationYear"
        appFormValidation
      />
      <div *ngIf="addBookForm.get('publicationYear')?.invalid && (addBookForm.get('publicationYear')?.dirty || addBookForm.get('publicationYear')?.touched)" class="invalid-feedback">
        Please enter a valid year.
      </div>
    </div>

    <div class="form-group">
      <label for="genre">Genre</label>
      <select
        id="genre"
        class="form-control"
        formControlName="genre"
        [ngModel]="selectedGenre"
      >
        <option *ngFor="let genre of genres" [value]="genre">{{ genre }}</option>
      </select>
      <div *ngIf="addBookForm.get('genre')?.invalid && (addBookForm.get('genre')?.dirty || addBookForm.get('genre')?.touched)" class="invalid-feedback">
        Genre is required.
      </div>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <button [disabled]="isLoading" type="submit" class="btn btn-primary">
      <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
      Add Book
    </button>
  </form>
</div>
